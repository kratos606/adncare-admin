import{u as k,k as E,r as t,j as e,a as y,B as v}from"./index-CdkbwK6B.js";import{C as T}from"./Container-DQNT_4J4.js";import{C as j}from"./CircularProgress-DWt0ae3m.js";import{B as m,T as $}from"./Box-DAti2-1c.js";import{T as u}from"./TextField-A2G-ApWF.js";import{B as b}from"./Button-DNkXxOpl.js";import{S as A}from"./Snackbar-CiqW6jiD.js";import{A as D}from"./Alert-yMGXwrAF.js";import"./useThemeProps-BR57ylZ7.js";import"./List-DiWJlGpm.js";import"./createSvgIcon-Dch7dBPN.js";import"./IconButton--_e1gMNA.js";const V=()=>{const d=k(),{id:n}=E(),[a,c]=t.useState({name:"",email:"",password:""}),[w,C]=t.useState(!0),[i,p]=t.useState(!1),[o,s]=t.useState({open:!1,message:"",severity:"success"}),S=async()=>{try{const r=await y.get(`${v}/users/${n}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log(r),c({name:r.data.user.name,email:r.data.user.email,password:""})}catch(r){console.error("Error fetching user:",r),s({open:!0,message:"Failed to fetch user data.",severity:"error"})}finally{C(!1)}};t.useEffect(()=>{S()},[n]);const l=r=>{c({...a,[r.target.name]:r.target.value})},B=async r=>{var f,h;if(r.preventDefault(),!a.name||!a.email||!a.password){s({open:!0,message:"Please fill in all fields.",severity:"warning"});return}p(!0);try{await y.put(`${v}/users/${n}`,{name:a.name,email:a.email,password:a.password}),s({open:!0,message:"User updated successfully!",severity:"success"}),setTimeout(()=>d("/admin"),1500)}catch(x){console.error("Error updating user:",x);const U=((h=(f=x.response)==null?void 0:f.data)==null?void 0:h.message)||"Failed to update user.";s({open:!0,message:U,severity:"error"})}finally{p(!1)}},g=()=>{s({...o,open:!1})};return w?e.jsx(T,{maxWidth:"sm",sx:{mt:5,textAlign:"center"},children:e.jsx(j,{})}):e.jsxs(m,{children:[e.jsx($,{variant:"h4",component:"h1",gutterBottom:!0,children:"Update User"}),e.jsxs(m,{component:"form",onSubmit:B,noValidate:!0,sx:{mt:1},children:[e.jsx(u,{label:"Name",name:"name",fullWidth:!0,margin:"normal",required:!0,value:a.name,onChange:l}),e.jsx(u,{label:"Email",name:"email",type:"email",fullWidth:!0,margin:"normal",required:!0,value:a.email,onChange:l}),e.jsx(u,{label:"Password",name:"password",type:"password",fullWidth:!0,margin:"normal",required:!0,value:a.password,onChange:l}),e.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",mt:3},children:[e.jsx(b,{variant:"contained",color:"primary",type:"submit",disabled:i,children:i?e.jsx(j,{size:24}):"Update"}),e.jsx(b,{variant:"outlined",color:"secondary",onClick:()=>d("/admin"),disabled:i,children:"Cancel"})]})]}),e.jsx(A,{open:o.open,autoHideDuration:6e3,onClose:g,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(D,{onClose:g,severity:o.severity,sx:{width:"100%"},children:o.message})})]})};export{V as default};
