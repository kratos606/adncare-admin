import{r as o,a as f,B as p,j as t}from"./index-CdkbwK6B.js";import{D as C}from"./Delete-kRsdOOVQ.js";import{B as l,T as u}from"./Box-DAti2-1c.js";import{T as d}from"./TextField-A2G-ApWF.js";import{I}from"./IconButton--_e1gMNA.js";import{B as m}from"./Button-DNkXxOpl.js";import"./createSvgIcon-Dch7dBPN.js";import"./List-DiWJlGpm.js";const S=()=>{const[a,s]=o.useState({title:"",description:"",cta_button:"",bullets:[""],image:null}),[i,h]=o.useState(null),[g,x]=o.useState(!1);o.useEffect(()=>{b()},[]);const b=async()=>{try{const e=await f.get(`${p}/product`);e.data.status==="success"&&e.data.data&&s({title:e.data.data.title,description:e.data.data.description,cta_button:e.data.data.cta_button,bullets:e.data.data.bullets,image:`${p}/storage/`+e.data.data.image_path})}catch(e){console.error("Error fetching product data",e)}},j=e=>{const r=a.bullets.filter((n,P)=>P!==e);s({...a,bullets:r})},c=e=>{const{name:r,value:n}=e.target;s({...a,[r]:n})},y=(e,r)=>{const n=[...a.bullets];n[e]=r,s({...a,bullets:n})},v=()=>{s({...a,bullets:[...a.bullets,""]})},B=async e=>{e.preventDefault(),x(!0);const r=new FormData;r.append("title",a.title),r.append("description",a.description),r.append("cta_button",a.cta_button),r.append("bullets",JSON.stringify(a.bullets)),i&&r.append("image",i);try{const n=await f.post(`${p}/product/update`,r,{headers:{"Content-Type":"multipart/form-data"}});b(),h(null)}catch(n){console.error("Error updating product data",n)}finally{x(!1)}};return t.jsxs(l,{children:[t.jsx(u,{variant:"h4",gutterBottom:!0,children:"Update Product"}),t.jsxs("form",{onSubmit:B,children:[t.jsx(d,{fullWidth:!0,label:"Title",name:"title",value:a.title,inputProps:{maxLength:50},onChange:c,margin:"normal",required:!0}),t.jsx(d,{fullWidth:!0,label:"Description",name:"description",value:a.description,onChange:c,margin:"normal",inputProps:{maxLength:250},multiline:!0,rows:4,required:!0}),t.jsx(d,{fullWidth:!0,label:"CTA Button",name:"cta_button",inputProps:{maxLength:16},value:a.cta_button,onChange:c,margin:"normal",required:!0}),t.jsxs(l,{mt:2,mb:2,children:[t.jsx(u,{variant:"subtitle1",children:"Bullets"}),a.bullets.map((e,r)=>t.jsxs(l,{display:"flex",alignItems:"center",gap:1,mb:1,children:[t.jsx(d,{fullWidth:!0,value:e,onChange:n=>y(r,n.target.value),inputProps:{maxLength:16},required:!0}),t.jsx(I,{onClick:()=>j(r),color:"secondary",children:t.jsx(C,{})})]},r)),t.jsx(m,{variant:"outlined",color:"primary",onClick:v,children:"Add Bullet"})]}),t.jsx(l,{mt:2,mb:2,children:a.image&&t.jsxs(l,{children:[t.jsx(u,{variant:"body2",children:"Image :"}),t.jsx("img",{src:a.image,alt:"Preview",style:{maxWidth:"100%",height:"auto",marginTop:"10px"}})]})}),t.jsxs(l,{mt:2,mb:2,children:[t.jsxs(m,{variant:"contained",component:"label",children:["Upload Image",t.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&h(e.target.files[0])},required:!0})]}),i&&t.jsxs(l,{children:[t.jsx(u,{variant:"body2",children:"Image Preview:"}),t.jsx("img",{src:URL.createObjectURL(i),alt:"Preview",style:{maxWidth:"100%",height:"auto",marginTop:"10px"}})]})]}),t.jsx(m,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,disabled:g,children:g?"Updating...":"Update Product"})]})]})};export{S as default};
