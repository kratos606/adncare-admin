import{j as e,r as x,a as y,B as A}from"./index-CdkbwK6B.js";import{c as L}from"./createSvgIcon-Dch7dBPN.js";import{C as D}from"./Container-DQNT_4J4.js";import{T as h,B as E,P as T}from"./Box-DAti2-1c.js";import{G as n}from"./Grid-DnHPB7Lp.js";import{T as i}from"./TextField-A2G-ApWF.js";import{I as S}from"./IconButton--_e1gMNA.js";import{B as w}from"./Button-DNkXxOpl.js";import{S as I}from"./Snackbar-CiqW6jiD.js";import{A as F}from"./Alert-yMGXwrAF.js";import"./useThemeProps-BR57ylZ7.js";import"./List-DiWJlGpm.js";const W=L(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m5 11h-4v4h-2v-4H7v-2h4V7h2v4h4z"}),"AddCircle"),B=L(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m5 11H7v-2h10z"}),"RemoveCircle"),Q=()=>{const[s,a]=x.useState({welcome_title:"",welcome_description:"",welcome_stitle:"",welcome_sdescription:"",cta_title:"",cta_description:"",bullets:[""],cta_button:"",counter:[""]}),[P,q]=x.useState(!0),[t,g]=x.useState({}),[b,p]=x.useState({open:!1,message:"",severity:"success"});x.useEffect(()=>{y.get(`${A}/welcome-section`).then(o=>{if(o.data.status==="success"){const r=o.data.data;a({welcome_title:r.welcome_title||"",welcome_description:r.welcome_description||"",welcome_stitle:r.welcome_stitle||"",welcome_sdescription:r.welcome_sdescription||"",cta_title:r.cta_title||"",cta_description:r.cta_description||"",bullets:r.bullets?JSON.parse(r.bullets):[""],cta_button:r.cta_button||"",counter:r.counter?JSON.parse(r.counter):[""]})}}).catch(o=>{console.error("Error fetching welcome section:",o),p({open:!0,message:"Error fetching welcome section data.",severity:"error"})}).finally(()=>{q(!1)})},[]);const m=o=>{const{name:r,value:l}=o.target;a({...s,[r]:l})},_=(o,r,l,u)=>{if(u==="counter"&&l==="count"){const c=Math.min(Number(r),99999),d=[...s.counter];d[o]={...d[o],[l]:c},a({...s,counter:d})}else if(u==="counter"){const c=[...s.counter];c[o]={...c[o],[l]:r},a({...s,counter:c})}else{const c=[...s[u||l]];c[o]=r,a({...s,[u||l]:c})}},v=o=>{a(o==="counter"?{...s,counter:[...s.counter,{count:"",label:""}]}:{...s,[o]:[...s[o],""]})},f=(o,r)=>{const l=s[r].filter((u,c)=>c!==o);a({...s,[r]:l})},k=o=>{o.preventDefault(),g({});const r={...s,bullets:s.bullets,counter:s.counter};console.log(r),y.post(`${A}/welcome-section`,r).then(l=>{l.data.status==="success"?p({open:!0,message:"Welcome section updated successfully!",severity:"success"}):(p({open:!0,message:"There was an error updating the welcome section.",severity:"error"}),l.data.errors&&g(l.data.errors))}).catch(l=>{console.error("Error updating welcome section:",l),p({open:!0,message:"There was an error updating the welcome section.",severity:"error"}),l.response&&l.response.data.errors&&g(l.response.data.errors)})},C=(o,r)=>{r!=="clickaway"&&p({...b,open:!1})};return P?e.jsx(D,{children:e.jsx(h,{variant:"h6",children:"Loading..."})}):e.jsxs(E,{children:[e.jsx(h,{variant:"h4",gutterBottom:!0,children:"Update Welcome Section"}),e.jsx("form",{onSubmit:k,children:e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:12,children:e.jsx(i,{label:"Welcome Title",name:"welcome_title",value:s.welcome_title,onChange:m,fullWidth:!0,required:!0,error:!!t.welcome_title,inputProps:{maxLength:24},helperText:t.welcome_title?t.welcome_title[0]:""})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(i,{label:"Welcome Description",name:"welcome_description",value:s.welcome_description,onChange:m,fullWidth:!0,multiline:!0,rows:4,required:!0,inputProps:{maxLength:250},error:!!t.welcome_description,helperText:t.welcome_description?t.welcome_description[0]:""})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(i,{label:"Welcome Sub-Title",name:"welcome_stitle",value:s.welcome_stitle,onChange:m,fullWidth:!0,required:!0,error:!!t.welcome_stitle,inputProps:{maxLength:24},helperText:t.welcome_stitle?t.welcome_stitle[0]:""})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(i,{label:"Welcome Sub-Description",name:"welcome_sdescription",value:s.welcome_sdescription,onChange:m,fullWidth:!0,multiline:!0,rows:4,inputProps:{maxLength:250},required:!0,error:!!t.welcome_sdescription,helperText:t.welcome_sdescription?t.welcome_sdescription[0]:""})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(i,{label:"CTA Title",name:"cta_title",value:s.cta_title,onChange:m,fullWidth:!0,required:!0,inputProps:{maxLength:24},error:!!t.cta_title,helperText:t.cta_title?t.cta_title[0]:""})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(i,{label:"CTA Description",name:"cta_description",value:s.cta_description,onChange:m,fullWidth:!0,multiline:!0,rows:4,inputProps:{maxLength:250},required:!0,error:!!t.cta_description,helperText:t.cta_description?t.cta_description[0]:""})}),e.jsxs(n,{item:!0,xs:12,children:[e.jsx(h,{variant:"h6",children:"Bullets"}),s.bullets.map((o,r)=>e.jsx(T,{style:{padding:"1rem",marginBottom:"1rem"},variant:"outlined",children:e.jsxs(n,{container:!0,alignItems:"center",spacing:1,children:[e.jsx(n,{item:!0,xs:11,children:e.jsx(i,{label:`Bullet ${r+1}`,value:o,onChange:l=>_(r,l.target.value,"bullets"),inputProps:{maxLength:24},fullWidth:!0,required:!0,error:t.bullets&&Array.isArray(t.bullets)&&!!t.bullets[r],helperText:t.bullets&&Array.isArray(t.bullets)&&t.bullets[r]?t.bullets[r]:""})}),e.jsx(n,{item:!0,xs:1,children:e.jsx(S,{onClick:()=>f(r,"bullets"),disabled:s.bullets.length===1,children:e.jsx(B,{color:"error"})})})]})},r)),e.jsx(w,{variant:"contained",color:"primary",startIcon:e.jsx(W,{}),onClick:()=>v("bullets"),children:"Add Bullet"}),t.bullets&&typeof t.bullets=="string"&&e.jsx(h,{variant:"body2",color:"error",children:t.bullets})]}),e.jsx(n,{item:!0,xs:12,children:e.jsx(i,{label:"CTA Button Text",name:"cta_button",value:s.cta_button,onChange:m,fullWidth:!0,required:!0,inputProps:{maxLength:24},error:!!t.cta_button,helperText:t.cta_button?t.cta_button[0]:""})}),e.jsxs(n,{item:!0,xs:12,children:[e.jsx(h,{variant:"h6",children:"Counters"}),s.counter.map((o,r)=>{var l,u,c,d;return e.jsx(T,{style:{padding:"1rem",marginBottom:"1rem"},variant:"outlined",children:e.jsxs(n,{container:!0,alignItems:"center",spacing:1,children:[e.jsx(n,{item:!0,xs:5,children:e.jsx(i,{label:`Count ${r+1}`,value:o==null?void 0:o.count,onChange:j=>_(r,j.target.value,"count","counter"),fullWidth:!0,required:!0,type:"number",error:t.counter&&Array.isArray(t.counter)&&!!((l=t.counter[r])!=null&&l.count),helperText:t.counter&&Array.isArray(t.counter)&&((u=t.counter[r])!=null&&u.count)?t.counter[r].count:""})}),e.jsx(n,{item:!0,xs:5,children:e.jsx(i,{label:`Label ${r+1}`,value:o==null?void 0:o.label,onChange:j=>_(r,j.target.value,"label","counter"),fullWidth:!0,required:!0,inputProps:{maxLength:24},error:t.counter&&Array.isArray(t.counter)&&!!((c=t.counter[r])!=null&&c.label),helperText:t.counter&&Array.isArray(t.counter)&&((d=t.counter[r])!=null&&d.label)?t.counter[r].label:""})}),e.jsx(n,{item:!0,xs:1,children:e.jsx(S,{onClick:()=>f(r,"counter"),disabled:s.counter.length===1,children:e.jsx(B,{color:"error"})})})]})},r)}),e.jsx(w,{variant:"contained",color:"primary",startIcon:e.jsx(W,{}),onClick:()=>v("counter"),children:"Add Counter"}),t.counter&&typeof t.counter=="string"&&e.jsx(h,{variant:"body2",color:"error",children:t.counter})]}),e.jsx(n,{item:!0,xs:12,children:e.jsx(w,{type:"submit",variant:"contained",color:"success",size:"large",children:"Update Welcome Section"})})]})}),e.jsx(I,{open:b.open,autoHideDuration:6e3,onClose:C,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(F,{onClose:C,severity:b.severity,sx:{width:"100%"},children:b.message})})]})};export{Q as default};
