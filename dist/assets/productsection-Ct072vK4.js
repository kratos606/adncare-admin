import{r as o,a as f,B as m,j as t}from"./index-CjDFkInu.js";import{D as I}from"./Delete-CvnuvFEg.js";import{B as n,T as d}from"./Box-D2ePpQu4.js";import{T as u}from"./TextField-2R_2fVAW.js";import{I as T}from"./IconButton-CeC_4U9q.js";import{B as p}from"./Button-BdfboGMk.js";import"./createSvgIcon-Wb5NpHkq.js";import"./List-BiWVhqcH.js";const q=()=>{const[a,s]=o.useState({title:"",description:"",cta_button:"",bullets:[""],image:null}),[i,h]=o.useState(null),[g,b]=o.useState(!1);o.useEffect(()=>{x()},[]);const x=async()=>{try{const e=await f.get(`${m}/product`);e.data.status==="success"&&e.data.data&&s({title:e.data.data.title,description:e.data.data.description,cta_button:e.data.data.cta_button,bullets:e.data.data.bullets,image:`${m}/storage/`+e.data.data.image_path})}catch(e){console.error("Error fetching product data",e)}},j=e=>{const r=a.bullets.filter((l,C)=>C!==e);s({...a,bullets:r})},c=e=>{const{name:r,value:l}=e.target;s({...a,[r]:l})},y=(e,r)=>{const l=[...a.bullets];l[e]=r,s({...a,bullets:l})},v=()=>{s({...a,bullets:[...a.bullets,""]})},B=async e=>{e.preventDefault(),b(!0);const r=new FormData;r.append("title",a.title),r.append("description",a.description),r.append("cta_button",a.cta_button),r.append("bullets",JSON.stringify(a.bullets)),i&&r.append("image",i);try{const l=await f.post(`${m}/product/update`,r,{headers:{"Content-Type":"multipart/form-data"}});x(),h(null)}catch(l){console.error("Error updating product data",l)}finally{b(!1)}};return t.jsxs(n,{children:[t.jsx(d,{variant:"h4",gutterBottom:!0,children:"Update Product"}),t.jsxs("form",{onSubmit:B,children:[t.jsx(u,{fullWidth:!0,label:"Title",name:"title",value:a.title,onChange:c,margin:"normal",required:!0}),t.jsx(u,{fullWidth:!0,label:"Description",name:"description",value:a.description,onChange:c,margin:"normal",multiline:!0,rows:4,required:!0}),t.jsx(u,{fullWidth:!0,label:"CTA Button",name:"cta_button",value:a.cta_button,onChange:c,margin:"normal",required:!0}),t.jsxs(n,{mt:2,mb:2,children:[t.jsx(d,{variant:"subtitle1",children:"Bullets"}),a.bullets.map((e,r)=>t.jsxs(n,{display:"flex",alignItems:"center",gap:1,mb:1,children:[t.jsx(u,{fullWidth:!0,value:e,onChange:l=>y(r,l.target.value),required:!0}),t.jsx(T,{onClick:()=>j(r),color:"secondary",children:t.jsx(I,{})})]},r)),t.jsx(p,{variant:"outlined",color:"primary",onClick:v,children:"Add Bullet"})]}),t.jsx(n,{mt:2,mb:2,children:a.image&&t.jsxs(n,{children:[t.jsx(d,{variant:"body2",children:"Image :"}),t.jsx("img",{src:a.image,alt:"Preview",style:{maxWidth:"100%",height:"auto",marginTop:"10px"}})]})}),t.jsxs(n,{mt:2,mb:2,children:[t.jsxs(p,{variant:"contained",component:"label",children:["Upload Image",t.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&h(e.target.files[0])},required:!0})]}),i&&t.jsxs(n,{children:[t.jsx(d,{variant:"body2",children:"Image Preview:"}),t.jsx("img",{src:URL.createObjectURL(i),alt:"Preview",style:{maxWidth:"100%",height:"auto",marginTop:"10px"}})]})]}),t.jsx(p,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,disabled:g,children:g?"Updating...":"Update Product"})]})]})};export{q as default};
