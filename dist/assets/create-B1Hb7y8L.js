import{u as C,r as i,j as s,a as b,B as S}from"./index-CdkbwK6B.js";import{B as u,T as q}from"./Box-DAti2-1c.js";import{T as c}from"./TextField-A2G-ApWF.js";import{B as g}from"./Button-DNkXxOpl.js";import{C as B}from"./CircularProgress-DWt0ae3m.js";import{S as N}from"./Snackbar-CiqW6jiD.js";import{A as E}from"./Alert-yMGXwrAF.js";import"./List-DiWJlGpm.js";import"./createSvgIcon-Dch7dBPN.js";import"./IconButton--_e1gMNA.js";const F=r=>{const e={};return r.name||(e.name="Name is required"),r.email||(e.email="Email is required"),r.password||(e.password="Password is required"),e},P=({formData:r,handleChange:e,handleSubmit:n,loading:t,onCancel:o})=>s.jsxs(u,{component:"form",onSubmit:n,noValidate:!0,sx:{mt:1},children:[s.jsx(c,{label:"Name",name:"name",fullWidth:!0,margin:"normal",required:!0,value:r.name,onChange:e}),s.jsx(c,{label:"Email",name:"email",type:"email",fullWidth:!0,margin:"normal",required:!0,value:r.email,onChange:e}),s.jsx(c,{label:"Password",name:"password",type:"password",fullWidth:!0,margin:"normal",required:!0,value:r.password,onChange:e}),s.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",mt:3},children:[s.jsx(g,{variant:"contained",color:"primary",type:"submit",disabled:t,children:t?s.jsx(B,{size:24}):"Create"}),s.jsx(g,{variant:"outlined",color:"secondary",onClick:o,disabled:t,children:"Cancel"})]})]}),T=({snackbar:r,handleClose:e})=>s.jsx(N,{open:r.open,autoHideDuration:6e3,onClose:e,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:s.jsx(E,{onClose:e,severity:r.severity,sx:{width:"100%"},children:r.message})}),M=()=>{const r=C();i.useState(!1);const[e,n]=i.useState({name:"",email:"",password:""}),[t,o]=i.useState(!1),[d,p]=i.useState({open:!1,message:"",severity:"success"}),l=(a,m="success")=>{p({open:!0,message:a,severity:m})},y=a=>{n({...e,[a.target.name]:a.target.value})},j=async a=>{var f,x;a.preventDefault();const m=F(e);if(Object.keys(m).length>0){l("Please fill in all required fields.","warning");return}o(!0);try{await b.post(`${S}/register`,e),l("User created successfully!"),setTimeout(()=>r("/admin"),1500)}catch(h){console.error("Error creating user:",h);const w=((x=(f=h.response)==null?void 0:f.data)==null?void 0:x.message)||"Failed to create user. Please try again.";l(w,"error")}finally{o(!1)}},v=()=>{p({...d,open:!1})};return s.jsxs(u,{sx:{display:"flex",flexDirection:"column"},children:[s.jsx(q,{variant:"h4",component:"h1",gutterBottom:!0,children:"Create New User"}),s.jsx(P,{formData:e,handleChange:y,handleSubmit:j,loading:t,onCancel:()=>r("/users")}),s.jsx(T,{snackbar:d,handleClose:v})]})};export{M as default};
